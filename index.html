<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ß–∏—Ç–∞–ª–∫–∞</title>
  <style>
    body {
      margin: 20px;
      font-size: 16px;
      font-family: sans-serif;
      background-color: white;
      color: black;
    }
    .dark-theme {
      background-color: #1e1e1e;
      color: #e0e0e0;
    }
    #text-container {
      max-width: 800px;
      margin: 20px auto;
      white-space: pre-wrap;
      overflow-y: scroll;
      height: 500px;
      border: 1px solid #ccc;
      padding: 10px;
      box-sizing: border-box;
    }
    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    #hidden-tester {
      visibility: hidden;
      position: absolute;
      top: 0;
      left: 0;
      width: 800px;
      height: 460px;
      white-space: pre-wrap;
      overflow-y: auto;
      border: none;
      padding: 10px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>
  <!-- üÜï –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ -->
  <div style="max-width: 800px; margin: 0 auto 20px;">
    <textarea id="textInput" rows="10" style="width: 100%; box-sizing: border-box;" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å—é–¥–∞..."></textarea>
    <button onclick="loadCustomText()" style="margin-top: 10px;">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–∫—Å—Ç</button>
  </div>
  <!-- üÜï –ö–æ–Ω–µ—Ü —Ñ–æ—Ä–º—ã –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ -->

  <div class="controls">
    <button onclick="prevPage()">–ù–∞–∑–∞–¥</button>
    <button onclick="nextPage()">–í–ø–µ—Ä—ë–¥</button>

    <label>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞:
      <input type="range" id="fontSizeSlider" min="12" max="30" value="16" onchange="updateFontSize()">
    </label>

    <label>–¶–≤–µ—Ç —Ñ–æ–Ω–∞:
      <select id="themeSelector" onchange="updateTheme()">
        <option value="light">–°–≤–µ—Ç–ª—ã–π</option>
        <option value="dark">–¢—ë–º–Ω—ã–π</option>
      </select>
    </label>

    <label>
      <input type="checkbox" id="showAllCheckbox" onchange="toggleShowAll()">
      –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Å—å —Ç–µ–∫—Å—Ç
    </label>
  </div>

  <div id="text-container"></div>
  <div id="hidden-tester"></div>

  <script>
    // –ó–∞–≥–ª—É—à–∫–∞ —Ç–µ–∫—Å—Ç–∞ - –Ω–∞—á–∞–ª–æ

    let text = `1. –≠—Ç–æ –ø—Ä–∏–º–µ—Ä –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞. –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—é–¥–∞ –ª—é–±–æ–π –æ–±—ä–µ–º —Ç–µ–∫—Å—Ç–∞. –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –±—É–¥–µ—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—å –µ–≥–æ –ø–æ –≤–∏–¥–∏–º–æ–º—É –æ–±—ä–µ–º—É. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –æ—Ñ–ª–∞–π–Ω HTML. –í—ã –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –¢–∞–∫–∂–µ –æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ 1–°. –°–≤–µ—Ç–ª–∞—è –∏ —Ç—ë–º–Ω–∞—è —Ç–µ–º—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é. –ü–æ–ª–∑—É–Ω–æ–∫ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –æ—Ç 12 –¥–æ 30 –ø–∏–∫—Å–µ–ª–µ–π. –ï—Å–ª–∏ —à—Ä–∏—Ñ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è ‚Äî —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ. –ï—Å–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å —à—Ä–∏—Ñ—Ç ‚Äî –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –ü—Ä–∏–º–µ—Ä –ø–æ—Å—Ç—Ä–æ–µ–Ω –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –æ–¥–∏–Ω HTML —Ñ–∞–π–ª. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è! –ö–æ–Ω–µ—Ü –ø—Ä–∏–º–µ—Ä–∞.

2. –≠—Ç–æ –ø—Ä–∏–º–µ—Ä –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞. –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—é–¥–∞ –ª—é–±–æ–π –æ–±—ä–µ–º —Ç–µ–∫—Å—Ç–∞. –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –±—É–¥–µ—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—å –µ–≥–æ –ø–æ –≤–∏–¥–∏–º–æ–º—É –æ–±—ä–µ–º—É. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –æ—Ñ–ª–∞–π–Ω HTML. –í—ã –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –¢–∞–∫–∂–µ –æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ 1–°. –°–≤–µ—Ç–ª–∞—è –∏ —Ç—ë–º–Ω–∞—è —Ç–µ–º—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é. –ü–æ–ª–∑—É–Ω–æ–∫ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –æ—Ç 12 –¥–æ 30 –ø–∏–∫—Å–µ–ª–µ–π. –ï—Å–ª–∏ —à—Ä–∏—Ñ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è ‚Äî —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ. –ï—Å–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å —à—Ä–∏—Ñ—Ç ‚Äî –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –ü—Ä–∏–º–µ—Ä –ø–æ—Å—Ç—Ä–æ–µ–Ω –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –æ–¥–∏–Ω HTML —Ñ–∞–π–ª. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è! –ö–æ–Ω–µ—Ü –ø—Ä–∏–º–µ—Ä–∞.

3. –≠—Ç–æ –ø—Ä–∏–º–µ—Ä –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞. –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—é–¥–∞ –ª—é–±–æ–π –æ–±—ä–µ–º —Ç–µ–∫—Å—Ç–∞. –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –±—É–¥–µ—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—å –µ–≥–æ –ø–æ –≤–∏–¥–∏–º–æ–º—É –æ–±—ä–µ–º—É. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –æ—Ñ–ª–∞–π–Ω HTML. –í—ã –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –¢–∞–∫–∂–µ –æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ 1–°. –°–≤–µ—Ç–ª–∞—è –∏ —Ç—ë–º–Ω–∞—è —Ç–µ–º—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é. –ü–æ–ª–∑—É–Ω–æ–∫ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –æ—Ç 12 –¥–æ 30 –ø–∏–∫—Å–µ–ª–µ–π. –ï—Å–ª–∏ —à—Ä–∏—Ñ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è ‚Äî —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ. –ï—Å–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å —à—Ä–∏—Ñ—Ç ‚Äî –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –ü—Ä–∏–º–µ—Ä –ø–æ—Å—Ç—Ä–æ–µ–Ω –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –æ–¥–∏–Ω HTML —Ñ–∞–π–ª. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è! –ö–æ–Ω–µ—Ü –ø—Ä–∏–º–µ—Ä–∞.

4. –≠—Ç–æ –ø—Ä–∏–º–µ—Ä –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞. –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—é–¥–∞ –ª—é–±–æ–π –æ–±—ä–µ–º —Ç–µ–∫—Å—Ç–∞. –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –±—É–¥–µ—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—å –µ–≥–æ –ø–æ –≤–∏–¥–∏–º–æ–º—É –æ–±—ä–µ–º—É. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –æ—Ñ–ª–∞–π–Ω HTML. –í—ã –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –¢–∞–∫–∂–µ –æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ 1–°. –°–≤–µ—Ç–ª–∞—è –∏ —Ç—ë–º–Ω–∞—è —Ç–µ–º—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é. –ü–æ–ª–∑—É–Ω–æ–∫ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –æ—Ç 12 –¥–æ 30 –ø–∏–∫—Å–µ–ª–µ–π. –ï—Å–ª–∏ —à—Ä–∏—Ñ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è ‚Äî —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ. –ï—Å–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å —à—Ä–∏—Ñ—Ç ‚Äî –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –ü—Ä–∏–º–µ—Ä –ø–æ—Å—Ç—Ä–æ–µ–Ω –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –æ–¥–∏–Ω HTML —Ñ–∞–π–ª. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è! –ö–æ–Ω–µ—Ü –ø—Ä–∏–º–µ—Ä–∞.`

    function loadCustomText() {
      const input = document.getElementById('textInput').value.trim();
      if (!input) return;

      text = input;
      base64Text = toBase64Unicode(text);
      decodedText = decodeBase64(base64Text);
      parts = decodedText.match(/\S+\s*|\s+/g) || [];
      paginateText();
      renderPage();
    }
    // –ó–∞–≥–ª—É—à–∫–∞ —Ç–µ–∫—Å—Ç–∞ - –∫–æ–Ω–µ—Ü
    

    // –î–ª—è 1–° (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏):
    // const base64Text = window.external.GetText();

    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ base64 (–ø—Ä–∏–º–µ—Ä –≤—Å—Ç—Ä–æ–µ–Ω)
    let base64Text = toBase64Unicode(text);
    
    function toBase64Unicode(str) {
      return btoa(unescape(encodeURIComponent(str)));
    }
    
    function decodeBase64(str) {
      try {
        return decodeURIComponent(escape(atob(str)));
      } catch (e) {
        return "–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞: " + e.message;
      }
    }

    let decodedText = decodeBase64(base64Text);
    let parts = [];
    let container = document.getElementById('text-container');
    let tester = document.getElementById('hidden-tester');
    let slider = document.getElementById('fontSizeSlider');
    let checkbox = document.getElementById('showAllCheckbox');
    let themeSelector = document.getElementById('themeSelector');

    let fontSize = 16;
    let showAll = false;
    let pageChunks = [];
    let currentPage = 0;

    function paginateText() {
      pageChunks = [];
      let buffer = "";
      let i = 0;

      tester.style.fontSize = fontSize + 'px';

      while (i < parts.length) {
        let tempBuffer = buffer + parts[i];
        tester.innerText = tempBuffer;

        if (tester.scrollHeight > tester.clientHeight && buffer !== "") {
          pageChunks.push(buffer.trim());
          buffer = parts[i] + ' ';
        } else {
          buffer = tempBuffer;
        }

        i++;
      }

      if (buffer.trim() !== "") {
        pageChunks.push(buffer.trim());
      }

      currentPage = 0;
    }

    function renderPage() {
      container.style.fontSize = fontSize + 'px';
      if (showAll) {
        container.innerText = decodedText;
      } else {
        container.innerText = pageChunks[currentPage] || "";
      }
    }

    function nextPage() {
      if (!showAll && currentPage < pageChunks.length - 1) {
        currentPage++;
        renderPage();
      }
    }

    function prevPage() {
      if (!showAll && currentPage > 0) {
        currentPage--;
        renderPage();
      }
    }

    function updateFontSize() {
      fontSize = parseInt(slider.value);
      container.style.fontSize = fontSize + 'px';
      tester.style.fontSize = fontSize + 'px';
      paginateText();
      renderPage();
    }

    function toggleShowAll() {
      showAll = checkbox.checked;
      renderPage();
    }

    function updateTheme() {
      const theme = themeSelector.value;
      if (theme === 'dark') {
        document.body.classList.add('dark-theme');
      } else {
        document.body.classList.remove('dark-theme');
      }
    }

    window.addEventListener('load', () => {
      parts = decodedText.match(/\S+\s*|\s+/g) || [];
      tester.style.visibility = 'hidden';
      updateFontSize();
    });

    window.addEventListener('resize', () => {
      paginateText();
      renderPage();
    });
  </script>
</body>
</html>
